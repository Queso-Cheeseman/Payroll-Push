<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>2025 Payroll Push Progress Tracker</title>
  <style>
    :root {
      --snow-blue: #e4f3ff;
      --frost-blue: #b3dcff;
      --mid-blue: #4c8dff;
      --deep-blue: #1b2a4a;
      --goal-green: #57e3ff;
      --goal-teal: #6ef5c2;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #ffffff;
      background:
        radial-gradient(circle at top, #ffffff 0, #ffffff 5%, rgba(255,255,255,0.1) 30%, transparent 60%),
        linear-gradient(180deg, #122138, #1b3256 40%, #101726 100%);
      overflow: hidden;
    }

    /* Snow layer container */
    #snow-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .snowflake {
      position: absolute;
      top: -10px;
      color: #ffffff;
      opacity: 0.75;
      pointer-events: none;
      animation-name: snowfall;
      animation-timing-function: linear;
      animation-iteration-count: 1;
    }

    @keyframes snowfall {
      0% {
        transform: translateY(-10px) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 0.9;
      }
      100% {
        transform: translateY(110vh) translateX(40px);
        opacity: 0;
      }
    }

    .tracker-card {
      position: relative;
      padding: 32px 40px;
      border-radius: 24px;
      background: linear-gradient(
        145deg,
        rgba(255,255,255,0.12),
        rgba(180,220,255,0.18)
      );
      box-shadow:
        0 24px 60px rgba(0,0,0,0.55),
        0 0 0 1px rgba(255,255,255,0.08);
      backdrop-filter: blur(18px);
      width: min(900px, 90vw);
      z-index: 1;
    }

    .tracker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .title-block h1 {
      margin: 0;
      font-size: 36px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-block h1 span.emoji {
      font-size: 36px;
    }

    .subtitle {
      font-size: 13px;
      opacity: 0.8;
    }

    .badge {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: linear-gradient(120deg, #5dd5ff, #9ff2ff);
      color: #08263a;
      font-weight: 700;
      box-shadow: 0 0 14px rgba(159, 242, 255, 0.7);
    }

    .main-metrics {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 24px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .current-total {
      font-size: 56px;
      font-weight: 800;
      line-height: 1;
      text-shadow: 0 0 30px rgba(255,255,255,0.3);
    }

    .current-label {
      font-size: 14px;
      opacity: 0.85;
      margin-top: 6px;
    }

    .percent-block {
      text-align: right;
    }

    .percent-value {
      font-size: 28px;
      font-weight: 700;
    }

    .percent-chip {
      margin-top: 4px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(9, 148, 255, 0.28);
      border: 1px solid rgba(181, 227, 255, 0.5);
    }

    .percent-chip span.icon {
      font-size: 16px;
    }

    /* Line graph */
    .line-section {
      margin-top: 4px;
    }

    .line-track {
      position: relative;
      width: 100%;
      height: 14px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,255,255,0.12), rgba(255,255,255,0.03));
      overflow: hidden;
      box-shadow:
        inset 0 0 6px rgba(0,0,0,0.7),
        0 0 18px rgba(132, 225, 255, 0.2);
    }

    .line-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--goal-teal), var(--goal-green), var(--mid-blue));
      border-radius: inherit;
      box-shadow:
        0 0 18px rgba(111, 245, 194, 0.9),
        0 0 40px rgba(87, 227, 255, 0.7);
      transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .line-dot {
      position: absolute;
      top: 50%;
      left: 0%;
      transform: translate(-50%, -50%);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff, #9fffe0);
      box-shadow:
        0 0 16px rgba(210, 255, 255, 0.8),
        0 0 32px rgba(86, 237, 255, 0.9);
      border: 2px solid rgba(255,255,255,0.8);
      transition: left 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .line-dot::after {
      content: "";
      position: absolute;
      inset: 5px;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,0.7);
    }

    .line-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 13px;
      opacity: 0.8;
    }

    .hidden-inputs {
      display: none;
    }

    @media (max-width: 540px) {
      .tracker-card {
        padding: 24px 18px;
      }
      .current-total {
        font-size: 44px;
      }
      .tracker-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .percent-block {
        text-align: left;
      }
    }
  </style>
</head>
<body>

  <!-- Dynamic snow layer -->
  <div id="snow-layer"></div>

  <div class="tracker-card">
    <div class="tracker-header">
      <div class="title-block">
        <h1>
          <span class="emoji">üéÑ</span>
          2025 Payroll Push
        </h1>
        <div class="subtitle">
          Cozy progress toward your year-end customer goal.
          <br />
          <span style="font-size: 11px; opacity: 0.8;">
           
          </span>
        </div>
      </div>
      <div class="badge">Snow Day Progress</div>
    </div>

    <div class="main-metrics">
      <div>
        <div class="current-total" id="totalDisplay">627</div>
        <div class="current-label">Total customers so far</div>
      </div>
      <div class="percent-block">
        <div class="percent-value" id="percentDisplay">72%</div>
        <div class="percent-chip">
          <span class="icon">‚ùÑÔ∏è</span>
          <span id="chipText">LFG!</span>
        </div>
      </div>
    </div>

    <div class="line-section">
      <div class="line-track">
        <div class="line-fill" id="lineFill"></div>
        <div class="line-dot" id="lineDot"></div>
      </div>
      <div class="line-labels">
        <span>0</span>
        <span>Goal: <span id="goalLabel">870</span></span>
      </div>
    </div>

    <!-- Hidden inputs so you can still update programmatically if needed -->
    <div class="hidden-inputs">
      <input type="number" id="current" value="627">
      <input type="number" id="goal" value="870">
    </div>
  </div>

  <script>
    const currentInput   = document.getElementById("current");
    const goalInput      = document.getElementById("goal");
    const totalDisplay   = document.getElementById("totalDisplay");
    const percentDisplay = document.getElementById("percentDisplay");
    const goalLabel      = document.getElementById("goalLabel");
    const lineFill       = document.getElementById("lineFill");
    const lineDot        = document.getElementById("lineDot");
    const chipText       = document.getElementById("chipText");
    const snowLayer      = document.getElementById("snow-layer");

    let snowIntensity = 0; // 0‚Äì1 based on progress

    const STORAGE_KEYS = {
      current: "winterGoalCurrent",
      goal: "winterGoalGoal"
    };

    function loadFromStorage() {
      try {
        const savedCurrent = localStorage.getItem(STORAGE_KEYS.current);
        const savedGoal    = localStorage.getItem(STORAGE_KEYS.goal);

        if (savedCurrent !== null) {
          currentInput.value = parseFloat(savedCurrent);
        }
        if (savedGoal !== null) {
          goalInput.value = parseFloat(savedGoal);
        }
      } catch (e) {
        // If storage is blocked, just ignore.
      }
    }

    function saveToStorage(current, goal) {
      try {
        localStorage.setItem(STORAGE_KEYS.current, String(current));
        localStorage.setItem(STORAGE_KEYS.goal, String(goal));
      } catch (e) {
        // Ignore if storage is unavailable
      }
    }

    function updateLine() {
      const current = Math.max(parseFloat(currentInput.value) || 0, 0);
      const goal    = Math.max(parseFloat(goalInput.value) || 1, 1);

      const ratio   = Math.min(current / goal, 1);
      const percent = Math.round(ratio * 100);

      // Update visuals
      totalDisplay.textContent   = current.toLocaleString();
      percentDisplay.textContent = percent + "%";
      goalLabel.textContent      = goal.toLocaleString();

      const widthPercent = ratio * 100;
      lineFill.style.width = widthPercent + "%";
      lineDot.style.left   = widthPercent + "%";

      // Fun message based on progress
      if (percent < 25) {
        chipText.textContent = "Just getting started‚Äîfresh snow!";
      } else if (percent < 50) {
        chipText.textContent = "Building the base of the snowman!";
      } else if (percent < 75) {
        chipText.textContent = "LFG!";
      } else if (percent < 100) {
        chipText.textContent = "So close‚Äîhot cocoa is ready!";
      } else {
        chipText.textContent = "Goal reached! Time for a snow day üéâ";
      }

      // Update snow intensity (0‚Äì1)
      snowIntensity = ratio;

      // Save values
      saveToStorage(current, goal);
    }

    // Public function (still usable from outside / programmatically)
    window.updateGoalProgress = function(currentValue, goalValue) {
      if (typeof currentValue !== "undefined") {
        currentInput.value = currentValue;
      }
      if (typeof goalValue !== "undefined") {
        goalInput.value = goalValue;
      }
      updateLine();
    };

    // Keyboard controls for adjusting total customers
    // ArrowUp   = +1
    // ArrowDown = -1
    // PageUp    = +10
    // PageDown  = -10
    // + or =    = +5
    // - or _    = -5
    window.addEventListener("keydown", function (e) {
      const activeTag = document.activeElement.tagName;
      if (activeTag === "INPUT" || activeTag === "TEXTAREA") return;

      let delta = 0;

      switch (e.key) {
        case "ArrowUp":
          delta = 1;
          break;
        case "ArrowDown":
          delta = -1;
          break;
        case "PageUp":
          delta = 10;
          break;
        case "PageDown":
          delta = -10;
          break;
        case "+":
        case "=":
          delta = 5;
          break;
        case "-":
        case "_":
          delta = -5;
          break;
        default:
          return;
      }

      e.preventDefault();

      const current = Math.max(parseFloat(currentInput.value) || 0, 0);
      const next = Math.max(current + delta, 0);

      currentInput.value = next;
      updateLine();
    });

    // Dynamic snow: more progress = more snow, faster & slightly larger
    function spawnSnowflake() {
      const flake = document.createElement("div");
      flake.className = "snowflake";

      // Choose a random snow character
      const chars = ["‚ùÑÔ∏è", "‚ùÖ", "‚ùÜ"];
      flake.textContent = chars[Math.floor(Math.random() * chars.length)];

      const intensity = Math.max(0.05, snowIntensity); // avoid 0
      const minDuration = 3;  // seconds
      const maxDuration = 10; // seconds
      const duration = maxDuration - intensity * (maxDuration - minDuration);

      const minSize = 10;
      const maxSize = 26;
      const size = minSize + intensity * (maxSize - minSize);

      const left = Math.random() * 100; // vw
      const delayJitter = Math.random() * 0.5; // small stagger

      flake.style.left = left + "vw";
      flake.style.fontSize = size + "px";
      flake.style.animationDuration = duration + "s";
      flake.style.animationDelay = delayJitter + "s";

      snowLayer.appendChild(flake);

      // Clean up after it falls
      setTimeout(() => {
        flake.remove();
      }, (duration + delayJitter + 1) * 1000);

      // Schedule next flake based on intensity
      const maxInterval = 900; // ms
      const minInterval = 120; // ms
      const nextDelay = maxInterval - intensity * (maxInterval - minInterval);

      setTimeout(spawnSnowflake, nextDelay);
    }

    // Initialize from storage, then start everything
    loadFromStorage();
    updateLine();
    spawnSnowflake();
  </script>
<!-- Santa fly-by silhouette animation with alternating direction -->
<div id="santa-flyby" class="direction-ltr">
  <div class="formation">
    <div class="sleigh-wrapper">
      <div class="reindeer-team">
        <!-- Rudolph (always first in DOM so he's "front" in both directions) -->
        <svg class="reindeer rudolph" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <!-- 8 more reindeer in formation -->
        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>

        <svg class="reindeer" viewBox="0 0 120 60" aria-hidden="true">
          <path d="M15 40 L35 35 L55 40 L75 38 L95 25 L80 10 L55 18 L35 12 L15 16 Z" fill="black"/>
          <circle cx="95" cy="25" r="4" fill="black"/>
          <path d="M90 10 L85 2 M92 10 L97 2" stroke="black" stroke-width="4" stroke-linecap="round"/>
        </svg>
      </div>

      <!-- Silhouette Santa + sleigh -->
      <svg class="santa-sleigh" viewBox="0 0 260 100" aria-hidden="true">
        <!-- Sleigh -->
        <path d="M10 70 
                 Q30 90 80 85 
                 Q90 80 90 65 
                 L160 65 
                 Q180 65 190 55 
                 Q200 45 190 30 
                 Q170 10 130 20 
                 Q100 25 95 40 
                 L70 40 
                 Q40 45 10 70 Z"
              fill="black"/>

        <!-- Santa -->
        <path d="M105 30 
                 Q115 10 135 18 
                 Q150 25 148 40 
                 Q150 60 130 60 
                 Q115 58 110 45 
                 Q108 40 105 30 Z"
              fill="black"/>

        <!-- Toy sack -->
        <path d="M150 25 
                 Q145 10 165 5 
                 Q190 0 200 20 
                 Q210 40 190 55 
                 Q170 65 155 55 
                 Q140 45 150 25 Z"
              fill="black"/>

        <!-- Reins -->
        <path d="M145 45 Q180 35 230 30" stroke="black" stroke-width="5" stroke-linecap="round"/>
      </svg>
    </div>

    <div class="sparkle-container"></div>
  </div>
</div>

<style>
  #santa-flyby {
    position: fixed;
    top: 14vh;
    left: -700px;
    pointer-events: none;
    z-index: 9999;
    opacity: 0;
  }

  .formation {
    position: relative;
  }

  .sleigh-wrapper {
    display: inline-flex;
    align-items: center;
    gap: 24px;
  }

  /* Directional layout: Rudolph leads */
  .direction-ltr .sleigh-wrapper {
    flex-direction: row;          /* Rudolph on left, moving right */
  }

  .direction-rtl .sleigh-wrapper {
    flex-direction: row-reverse;  /* Rudolph on right, moving left */
  }

  .reindeer-team {
    display: flex;
    gap: 10px;
  }

  svg.reindeer {
    height: 56px;
    animation: gallop 0.45s ease-in-out infinite alternate;
  }

  /* 2‚Äì2‚Äì2‚Äì2‚Äì1 staggered formation (vertical offsets) */
  .reindeer-team .reindeer:nth-child(1),
  .reindeer-team .reindeer:nth-child(2) {
    transform: translateY(-10px);
  }
  .reindeer-team .reindeer:nth-child(3),
  .reindeer-team .reindeer:nth-child(4) {
    transform: translateY(-4px);
  }
  .reindeer-team .reindeer:nth-child(5),
  .reindeer-team .reindeer:nth-child(6) {
    transform: translateY(2px);
  }
  .reindeer-team .reindeer:nth-child(7),
  .reindeer-team .reindeer:nth-child(8) {
    transform: translateY(8px);
  }
  .reindeer-team .reindeer:nth-child(9) {
    transform: translateY(4px);
  }

  .santa-sleigh {
    height: 90px;
  }

  /* Reindeer gallop */
  @keyframes gallop {
    from { transform: translateY(0); }
    to   { transform: translateY(-6px); }
  }

  /* Flight animations for each direction */
  .direction-ltr.fly {
    opacity: 1;
    animation: flyby-ltr 13s linear forwards;
  }
  .direction-rtl.fly {
    opacity: 1;
    animation: flyby-rtl 13s linear forwards;
  }

  @keyframes flyby-ltr {
    0%   { transform: translateX(-130vw) translateY(0vh); opacity:0; }
    10%  { opacity:1; }
    50%  { transform: translateX(0vw) translateY(-8vh); }
    90%  { opacity:1; }
    100% { transform: translateX(120vw) translateY(0vh); opacity:0; }
  }

  @keyframes flyby-rtl {
    0%   { transform: translateX(120vw) translateY(0vh); opacity:0; }
    10%  { opacity:1; }
    50%  { transform: translateX(0vw) translateY(-8vh); }
    90%  { opacity:1; }
    100% { transform: translateX(-130vw) translateY(0vh); opacity:0; }
  }

  /* Sparkles */
  .sparkle-container {
    position: absolute;
    inset: 0;
    overflow: visible;
  }

  .sparkle {
    position: absolute;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: white;
    opacity: 0;
    box-shadow: 0 0 8px rgba(255,255,255,0.9);
    animation: sparkleFade 1.1s ease-out forwards;
  }

  @keyframes sparkleFade {
    0%   { transform: scale(0.4); opacity:0; }
    20%  { opacity:1; }
    100% { transform: translate(-40px, -20px) scale(1); opacity:0; }
  }
</style>

<script>
(function () {
  const root = document.getElementById('santa-flyby');
  if (!root) return;

  const sparkleContainer = root.querySelector('.sparkle-container');

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  let sparkleInterval = null;
  let direction = 'ltr'; // start left-to-right

  function createSparkle() {
    const s = document.createElement('div');
    s.className = 'sparkle';

    // Place sparkles roughly behind the formation
    s.style.left = random(40, 200) + 'px';
    s.style.top = random(10, 80) + 'px';

    s.addEventListener('animationend', () => s.remove());
    sparkleContainer.appendChild(s);
  }

  function startSparkles() {
    if (sparkleInterval) return;
    sparkleInterval = setInterval(createSparkle, 130);
  }

  function stopSparkles() {
    if (!sparkleInterval) return;
    clearInterval(sparkleInterval);
    sparkleInterval = null;
    sparkleContainer.innerHTML = '';
  }

  function launchSanta() {
    // Set direction class
    root.classList.remove('direction-ltr', 'direction-rtl');
    root.classList.add(direction === 'ltr' ? 'direction-ltr' : 'direction-rtl');

    // Trigger fly animation
    root.classList.add('fly');
    startSparkles();

    function handleEnd() {
      root.classList.remove('fly');
      root.removeEventListener('animationend', handleEnd);
      stopSparkles();

      // Flip direction for next run
      direction = (direction === 'ltr') ? 'rtl' : 'ltr';

      // Schedule next fly-by
      const nextIn = 30000;
      setTimeout(launchSanta, nextIn);
    }

    root.addEventListener('animationend', handleEnd);
  }

  const firstIn = random(10000, 20000);
  setTimeout(launchSanta, firstIn);
})();
</script>
</body>
</html>
